---
title: IonicとCordovaプロジェクトのコード署名 (Code signing with Ionic and Cordova projects)
redirect_from: []
date: 2019-04-17 10:40:43 +0000
published: false

---
Naturally, Bitrise supports iOS applications built with either **Ionic** or **Cordova**. However, the code signing process is slightly different compared to a "native" Xcode project.

Bitrise supports both manual and automatic provisioning for Ionic and Cordova apps as well - and once again, the processes are somewhat different.

もちろん、Bitriseは**Ionic**や**Cordova**でビルドが実行されたiOSアプリのサポートも行っております。けれども、コード署名プロセスは”ネイティブ”なXcodeプロジェクトと比べて、少し違いがあります。

Bitriseは同様にIonicとCordovaアプリのマニュアル・オートプロビジョニングのサポートも行っております。ここでも、少しだけ方法が異なります。

### Ionic/Cordova code signing with manual provisioning  
マニュアルプロビジョニングによるIonic/Cordovaコード署名

1. Generate the native Xcode project locally from your Ionic or Cordova project by calling `cordova platform add ios` or `ionic cordova platform add ios`.

   `cordova platform add ios`もしくは`ionic cordova platform add ios`を呼び出して、Ionic/CordovaプロジェクトからローカルでネイティブXcodeプロジェクトを生成します。
2. Use our `codesigndoc` tool to [collect the code signing files](https://devcenter.bitrise.io/code-signing/ios-code-signing/collecting-files-with-codesigndoc/).

   Bitriseの`codesigndoc`ツールを使って[コード署名ファイルの収集](https://devcenter.bitrise.io/code-signing/ios-code-signing/collecting-files-with-codesigndoc/)を行います。
3. Upload the files to [bitrise.io](https://www.bitrise.io).

   You can do this either on the website UI or with the `codesigndoc` tool itself.

   ファイルをbitrise.ioへアップロードします。

   ウェブUI上で行うか、`codesigndoc`ツールを使って行うことができます。

   ![Screenshot](/img/code-signing/ios-code-signing/provisioning-and-certificate-upload.png)
4. Make sure you have the `Certificate and profile installer` step in your workflow.

   ワークフロー内に`Certificate and profile installer`ステップがあることを確認します。
5. Add the `Generate cordova build configuration` step to your Workflow. It must come after the `Certificate and profile installer` step.

   ワークフローへ`Generate cordova build configuration`ステップを追加します。このステップは、`Certificate and profile installer`ステップの後に来る必要があります。
6. Fill in the required input for the step. Please note that both the `Code Signing Identity` and the `Provisioning Profile` are required inputs for iOS apps even though they are not marked as such.

   そのステップの必要事項を記入します。`Code Signing Identity`と`Provisioning Profile`の両方がiOSアプリの必要なインプットになるのでご注意ください。

   ![Screenshot](/img/code-signing/ios-code-signing/cordova-config-inputs.png)
   * `Build configuration`: you can set it to either `debug` or `release`.　`debug`もしくは`release`のどちらかをセットすることができます。
   * `Code Sign Identity`: enter a Developer or a Distribution identity.　Developer IdentityもしくはDistribution Identityを入力します。
   * `Provisioning Profile`: enter the appropriate Provisioning Profile.　適切なプロビジョニングプロファイルを入力します。
   * `Packaging Type`: this controls what type of build is generated by Xcode. Set the type of code signing you need.　これはビルドのタイプをコントロールし、Xcodeより生成されます。必要なコード署名のタイプをセットしてください。
7. Add the `Cordova archive` or the `Ionic archive` step to your workflow.

   ワークフローへ`Cordova archive`もしくは`Ionic archive`ステップを追加します。
8. Fill in the required inputs.

   必要な情報を入力します。
   * The `Platform` input needs to be set to: `device`.
   * The `Build command configuration` input must match the `Build configuration` input of the `Generate cordova build configuration` step.
   * `Platform`インプットへ`device`とセットします。
   * `Build command configuration`インプットは`Generate cordova build configuration`ステップの`Build configuration`にマッチしなければなりません。

   This step must come after the `Generate cordova build configuration` step in the workflow.

   このステップはワークフローの`Generate cordova build configuration`ステップの後に来る必要があります。
9. Run your build!　ビルドを開始してください！

### Ionic/Cordova code signing with auto provisioning  
オートプロビジョニングによるIonic/Cordovaコード署名

1. Make sure your .p12 signing certificates are uploaded to [bitrise.io](https://www.bitrise.io).

   If you use `codesigndoc` to collect the files, note that you can tell the tool to export only the certificates, by calling:

   ご自身の.p12署名証明書がbitrise.ioにアップロードが完了していることを確認してください。ファイルの収集を行う`codesigndoc`を使う場合、証明書のみのエクスポートをするツールを以下のように呼び出すことができます：

       codesigndoc scan --certs-only xcode

   `codesigndoc` can also upload the files to the website, or you can do that manually.

   `codesigndoc`はウェブサイトへファイルのアップロードも行いますが、マニュアルで行うこともできます。
2. Add the `Cordova prepare` or the `Ionic prepare` step to your Workflow. These steps call the `platform rm` and `platform add` commands.

   ワークフローへ`Cordova prepare`もしくは`Ionic prepare`ステップを追加します。これらのステップは`platform rm`と`Ionic prepare`コマンドの呼び出しを行います。
3. Add the `iOS Auto Provision` step to your workflow. Please make sure it's the latest version!

   ワークフローへ`iOS Auto Provision`ステップを追加します。最新のバージョンであることをお確かめください！

   The step will export:　このステップは：
   * the project's development team　プロジェクトの開発チーム
   * the installed codesign identity's name　インストールされたcodesign identity 名
   * the installed provisioning profile.　インストールされたプロビジョニングプロファイル

   のエクスポートを行います。
4. Add the `Generate cordova build configuration` step to your Workflow. Configure the step to use the code signing settings exported by the `iOS Auto Prevision` step:

   ワークフローへ`Generate cordova build configuration`ステップを追加します。`iOS Auto Provision`ステップによってエクスポートされたコード署名設定を使用してステップの構成を行ってください：

   **Development distribution example**:

       - generate-cordova-build-configuration:
       	inputs:
           - development_team: $BITRISE_DEVELOPER_TEAM 
           - package_type: development 
           - code_sign_identity: $BITRISE_DEVELOPMENT_CODESIGN_IDENTITY 
           - provisioning_profile: $BITRISE_DEVELOPMENT_PROFILE 
           - configuration: debug

   **Production distribution example**:

       - generate-cordova-build-configuration:
           inputs:
           - development_team: $BITRISE_DEVELOPER_TEAM 
           - package_type: app-store 
           - code_sign_identity: $BITRISE_PRODUCTION_CODESIGN_IDENTITY 
           - provisioning_profile: $BITRISE_PRODUCTION_PROFILE 
           - configuration: release
5. Add the `Cordova Archive` or the `Ionic Archive` step to your workflow.

   ワークフローへ`Cordova Archive`もしくは`Ionic Archive`ステップを追加します。
6. Fill in the required inputs.

   必要な情報を入力します。
   * The `Platform` input needs to be set to: `device`.
   * The `Build command configuration` input must match the `Build configuration` input of the `Generate cordova build configuration` step.
   * `Platform`インプットへ`device`とセットします。
   * `Build command configuration`インプットは`Generate cordova build configuration`ステップの`Build configuration`にマッチしなければなりません。

   ![Screenshot](/img/code-signing/ios-code-signing/cordova-archive-step.png)
7. Set the `Should remove platforms as prepare step?` to `false`. This is crucial: it ensures the step will not remove and re-add the platform of the native projects generated in the `Cordova prepare` or the `Ionic prepare` step.

   `Should remove platforms as prepare step?`を`false`にセットします。

   ※このステップは、`Cordova prepare`もしくは`Ionic prepare`ステップ内で生成されたネイティブプロジェクトのプラットフォームを消去したり再追加したりするのを防ぎます。
8. Run your build!　ビルドを開始してください！